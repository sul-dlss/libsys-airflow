{% extends "appbuilder/base.html" %}

{% block content %}
<div>
    <h2>Authority FOLIO Records Deletes</h2>
    {% if run_id %}
        <p>
            DAG <strong>delete_authority_records</strong> triggered with
            <a href="/dags/delete_authority_records/graph?dag_run_id={{ run_id }}">Run ID {{ run_id }}</a>
        </p>
        {% if email %}
            Report email will be sent to {{ email }} when DAG is completed.
        {% endif %}
    {% else %}
    <p>
        To delete FOLIO Authority JSON records, create a csv file with a column <em>001s</em> and 
        with each 001 value per row, and upload the csv file.
    </p>
    <form enctype="multipart/form-data" method="POST" action="{{ url_for('AuthorityRecordsDeleteUploadView.upload_csv') }}">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
        <div class="row">
            <div class="col-md-4">
                <div class="form-group">
                    <p class="help-block">
                        Upload csv file with MARC field 001 values with a column of <em>001s</em>
                    </p>
                    <input type="file" class="form-control" id="upload-deletes" name="upload-deletes">
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-4">
                <div class="form-group">
                    <p class="help-block">
                        Email (Optional) to receive an report.
                    </p>
                    <input id="email" name="email" class="form-control"></input>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-4">
                <input type="submit" class="btn btn-primary" value="Delete FOLIO Authority JSON Records">
            </div>
        </div>
    </form>
    {% endif %}
</div>
{% endblock %}